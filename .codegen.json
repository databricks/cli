{
    "mode": "cli_legacy",
    "api_changelog": true,
    "formatter": "go run golang.org/x/tools/cmd/goimports@latest -w cmd && go fmt ./...",
    "services": {
        ".codegen/service.go.tmpl": "cmd/{{if .IsAccounts}}account{{else}}workspace{{end}}/{{(.TrimPrefix \"account\").KebabName}}/{{(.TrimPrefix \"account\").KebabName}}.go",
        ".codegen/tests/cmd/workspace/script.tmpl": "acceptance/cmd/workspace/{{.KebabName}}/script",
        ".codegen/tests/cmd/workspace/test.toml.tmpl": "acceptance/cmd/workspace/{{.KebabName}}/test.toml"
    },
    "batch": {
        ".codegen/cmds-workspace.go.tmpl": "cmd/workspace/cmd.go",
        ".codegen/cmds-account.go.tmpl": "cmd/account/cmd.go"
    },
    "toolchain": {
        "required": [
            "go"
        ],
        "post_generate": [
            "go test ./acceptance -v -update -run TestAccept/cmd/workspace || true",
            "go test ./acceptance -v -run TestAccept/cmd/workspace",
            "[ ! -f tagging.py ] || mv tagging.py internal/genkit/tagging.py",
            "go test -timeout 240s -run TestConsistentDatabricksSdkVersion github.com/databricks/cli/internal/build",
            "make schema",
            "echo 'bundle/internal/tf/schema/\\*.go linguist-generated=true' >> ./.gitattributes",
            "echo 'go.sum linguist-generated=true' >> ./.gitattributes",
            "echo 'bundle/schema/jsonschema.json linguist-generated=true' >> ./.gitattributes"
        ]
    }
}
