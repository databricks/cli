# Code generated from OpenAPI specs by Databricks SDK Generator. DO NOT EDIT.
{{- $excludes :=
	list
		"command-execution"
		"statement-execution"
		"dbfs"
		"dbsql-permissions"
		"account-access-control-proxy"
		"files"
        "dashboards"
        "queries-legacy"
}}

{{- $seen := list "" }}
{{- $cmdGrp := .KebabName }}
{{- if or .HasParent (or .IsAccounts (in $excludes .KebabName))  }}
{{skipThisFile}}
{{- end}}
{{- $generated := false -}}
{{- $supportedMethods := list "get" "list" "list-pipelines" }}
{{- range .Methods}}
{{- if in $supportedMethods .KebabName}}
{{- $generated = true }}

[[Server]]
Pattern = "{{.Verb}} {{replaceAll "2.2" "2.1" .Path}}"
Response.Body = '''
{{ template "response-body" dict "Response" .Response "Seen" $seen }}
'''
{{- end}}
{{- end}}

{{- if not $generated }}
{{skipThisFile}}
{{- end}}

{{- define "response-body" -}}
{{- $seen := .Seen -}}
{
    {{- $fields := .Response.Fields}}
    {{- range $i, $f := $fields}}
    {{- if (not (eq .SnakeName "next_page_token")) }}
    "{{.SnakeName}}": {{ template "value" dict "Key" .SnakeName "Entity" .Entity "Seen" $seen "Indent" 0}}{{if notLast $i $fields}},{{end}}
    {{- else}}
    "{{.SnakeName}}": ""{{if notLast $i $fields}},{{end}}
    {{- end}}
    {{- end}}
}
{{- end -}}

{{- define "value" -}}
{{- $seen := .Seen }}
{{- $indent := add .Indent 4 }}
{{- $key := .Key }}
{{- if .Entity.IsString -}}
"{{ $key }}"
{{- else if .Entity.IsNumber -}}
42
{{- else if .Entity.IsEnum -}}
"ENUM"
{{- else if .Entity.IsBool -}}
false
{{- else if .Entity.IsMap -}}
{
    {{- $fields := .Entity.Fields }}
    {{- range $i, $f := $fields}}
    {{ indent $indent}}"{{.Name}}": {{template "value" dict "Key" .Name "Entity" .Entity.MapValue "Seen" $seen "Indent" $indent  }}{{if notLast $i $fields}},{{end}}
    {{- end }}
{{ indent $indent}}}
{{- else if .Entity.IsObject -}}
{
    {{- $objName := .Entity.KebabName }}
    {{- if not (in $seen $objName) }}
    {{- range .Entity.Package.Types}}
    {{- if eq .KebabName $objName}}
    {{- $seen := append $seen .KebabName }}
    {{- $fields := .Fields }}
    {{- range $i, $f := $fields}}
    {{ indent $indent}}"{{.Name}}": {{ template "value" dict "Key" .Name "Entity" .Entity "Seen" $seen "Indent" $indent }}{{if notLast $i $fields}},{{end}}
    {{- end }}
    {{- end }}
    {{- end }}
    {{- end }}
{{ indent $indent}}}
{{- else if .Entity.IsArray -}}
[
    {{ indent $indent}}{{ template "value" dict "Key" .Entity.SnakeName "Entity" .Entity.ArrayValue "Seen" $seen "Indent" $indent }}
{{ indent $indent}}]
{{- else -}}
null
{{- end }}
{{- end -}}
