Uploading bundle files to /Workspace/Users/[USERNAME]/.bundle/signal-test/default/files...
Deploying resources...
Updating deployment state...
Deployment complete!

=== Wait until the destroy has started.The following resources will be deleted:
  delete job job1

All files and directories at the following location will be deleted: /Workspace/Users/[USERNAME]/.bundle/signal-test/default

Destroy in progress, sending interrupt signal...

>>> kill -INT [PID]

>>> wait [PID]
Operation interrupted. Gracefully shutting down...
Error: cannot delete resources.jobs.job1: deleting id=[NUMID]: Post "[DATABRICKS_URL]/api/2.2/jobs/delete": context canceled


Exit code: 130

=== A deletion request for deploy.lock should have been recorded in the requests file
>>> cat out.requests.txt
{
  "method": "POST",
  "path": "/api/2.0/workspace/delete",
  "body": {
    "path": "/Workspace/Users/[USERNAME]/.bundle/signal-test/default/state/deploy.lock"
  }
}

=== No deletion request for resources.json should be recorded. We still need state to complete the destroy.
>>> cat out.requests.txt

>>> [CLI] bundle debug plan
{
  "plan": {
    "resources.jobs.job1": {
      "action": "skip",
      "remote_state": {
        "creator_user_name": "[USERNAME]",
        "job_id": [NUMID],
        "settings": {
          "deployment": {
            "kind": "BUNDLE",
            "metadata_file_path": "/Workspace/Users/[USERNAME]/.bundle/signal-test/default/state/metadata.json"
          },
          "edit_mode": "UI_LOCKED",
          "format": "MULTI_TASK",
          "max_concurrent_runs": 1,
          "name": "job1",
          "queue": {
            "enabled": true
          }
        }
      }
    }
  }
}
