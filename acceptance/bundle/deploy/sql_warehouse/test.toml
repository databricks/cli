Cloud = true
Local = true
CloudSlow = true

EnvMatrix.DATABRICKS_CLI_DEPLOYMENT = ["terraform", "direct-exp"]

Ignore = [
    "databricks.yml",
]

[[Server]]
Pattern = "POST /api/2.0/sql/warehouses"
Response.Body = '''
{
    "id": "123",
    "name": "test_sql_warehouse"
}
'''

[[Server]]
Pattern = "GET /api/2.0/sql/warehouses/123"
Response.Body = '''
{
    "id": "123",
    "name": "test_sql_warehouse",
    "state": "RUNNING"
}
'''

[[Server]]
Pattern = "DELETE /api/2.0/sql/warehouses/123"
Response.Body = '''
{
    "id": "123",
    "name": "test_sql_warehouse"
}
'''

[[Server]]
Pattern = "GET /api/2.0/preview/sql/data_sources"
Response.Body = '''
[
    {
        "id": "456",
        "warehouse_id": "123",
        "name": "test_data_source"
    }
]
'''
