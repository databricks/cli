=== Creating state file with serial 5 ===
=== Creating WAL with corrupted MIDDLE entry ===
=== WAL content ===
{"lineage":"test-lineage-456","serial": [SERIAL]}
{"k":"resources.jobs.job_one","v":{"__id__": "[ID]","state":{"name":"job-one"}}}
{"k":"resources.jobs.partial_write","v":{"__id__": "[ID]","state":{"name":"partial-
{"k":"resources.jobs.job_two","v":{"__id__": "[ID]","state":{"name":"job-two"}}}
=== Deploy (should recover valid entries and skip corrupted line) ===

>>> [CLI] bundle deploy
Uploading bundle files to /Workspace/Users/[USERNAME]/.bundle/wal-corrupted-middle-test/default/files...
Recovering state from WAL file: [TEST_TMP_DIR]/.databricks/bundle/default/resources.json.wal
Warn: Could not read state file WAL entry in [TEST_TMP_DIR]/.databricks/bundle/default/resources.json.wal: line 3: {"k":"resources.jobs.partial_write","v":{"__id__": "[ID]","state":{"name":"partial-: unexpected end of JSON input
Warn: Saved corrupted WAL entries to [TEST_TMP_DIR]/.databricks/bundle/default/resources.json.wal.corrupted
Recovered 2 entries from WAL file.
Deploying resources...
Updating deployment state...
Deployment complete!
=== Final state (should have recovered entries) ===
{
  "serial": [SERIAL],
  "state_keys": [
    "resources.jobs.job_one",
    "resources.jobs.job_two"
  ]
}
=== Corrupted WAL entries file ===
{"k":"resources.jobs.partial_write","v":{"__id__": "[ID]","state":{"name":"partial-
=== WAL after deploy ===
WAL deleted (expected)
