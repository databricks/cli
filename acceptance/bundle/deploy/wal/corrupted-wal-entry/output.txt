=== Creating state file with serial 5 ===
=== Creating WAL with corrupted LAST entry ===
=== WAL content ===
{"lineage":"test-lineage-123","serial": [SERIAL]}
{"k":"resources.jobs.valid_job","v":{"__id__": "[ID]","state":{"name":"valid-job"}}}
{"k":"resources.jobs.another_valid","v":{"__id__": "[ID]","state":{"name":"another-valid"}}}
not valid json - corrupted last line (partial write from crash)
=== Deploy (should recover valid entries, skip corrupted last line) ===

>>> [CLI] bundle deploy
Uploading bundle files to /Workspace/Users/[USERNAME]/.bundle/wal-corrupted-test/default/files...
Deploying resources...
Updating deployment state...
Deployment complete!
=== Final state (should have recovered entries) ===
{
  "serial": [SERIAL],
  "state_keys": [
    "resources.jobs.another_valid",
    "resources.jobs.valid_job"
  ]
}
=== WAL after successful deploy ===
WAL deleted (expected)
