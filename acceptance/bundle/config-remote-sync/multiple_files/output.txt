Uploading bundle files to /Workspace/Users/[USERNAME]/.bundle/test-bundle-[UNIQUE_NAME]/default/files...
Deploying resources...
Updating deployment state...
Deployment complete!

=== Modify job_one: max_concurrent_runs and rename b_task
=== Modify job_two: max_concurrent_runs, remove c_task, rename b_task
=== Detect and save changes
Detected changes in 2 resource(s):

Resource: resources.jobs.job_one
  max_concurrent_runs: replace
  tasks[task_key='b_task']: remove
  tasks[task_key='b_task_renamed']: add
  tasks[task_key='c_task'].depends_on[0].task_key: replace

Resource: resources.jobs.job_two
  max_concurrent_runs: replace
  tasks[task_key='a_task'].depends_on[0].task_key: replace
  tasks[task_key='b_task']: remove
  tasks[task_key='b_task_renamed']: add
  tasks[task_key='c_task']: remove



=== Changes in job1.yml

>>> diff.py resources/job1.yml.backup resources/job1.yml
--- resources/job1.yml.backup
+++ resources/job1.yml
@@ -2,13 +2,13 @@
   jobs:
     job_one:
-      max_concurrent_runs: 1
+      max_concurrent_runs: 5
       tasks:
-        - task_key: b_task
+        - new_cluster:
+            node_type_id: [NODE_TYPE_ID]
+            num_workers: 1
+            spark_version: 13.3.x-snapshot-scala2.12
           notebook_task:
             notebook_path: /Users/{{workspace_user_name}}/b_task
-          new_cluster:
-            spark_version: 13.3.x-snapshot-scala2.12
-            node_type_id: [NODE_TYPE_ID]
-            num_workers: 1
+          task_key: b_task_renamed
         - task_key: c_task
           notebook_task:
@@ -19,5 +19,5 @@
             num_workers: 1
           depends_on:
-            - task_key: b_task
+            - task_key: b_task_renamed
         - task_key: a_task
           notebook_task:

=== Changes in job2.yml

>>> diff.py resources/job2.yml.backup resources/job2.yml
--- resources/job2.yml.backup
+++ resources/job2.yml
@@ -2,22 +2,13 @@
   jobs:
     job_two:
-      max_concurrent_runs: 2
+      max_concurrent_runs: 10
       tasks:
-        - task_key: b_task
+        - new_cluster:
+            node_type_id: [NODE_TYPE_ID]
+            num_workers: 1
+            spark_version: 13.3.x-snapshot-scala2.12
           notebook_task:
             notebook_path: /Users/{{workspace_user_name}}/b_task
-          new_cluster:
-            spark_version: 13.3.x-snapshot-scala2.12
-            node_type_id: [NODE_TYPE_ID]
-            num_workers: 1
-        - task_key: c_task
-          notebook_task:
-            notebook_path: /Users/{{workspace_user_name}}/c_task
-          new_cluster:
-            spark_version: 13.3.x-snapshot-scala2.12
-            node_type_id: [NODE_TYPE_ID]
-            num_workers: 2
-          depends_on:
-            - task_key: b_task
+          task_key: b_task_renamed
         - task_key: a_task
           notebook_task:
@@ -28,3 +19,3 @@
             num_workers: 1
           depends_on:
-            - task_key: c_task
+            - task_key: b_task_renamed
