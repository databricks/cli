
>>> [CLI] bundle validate
Name: test-bundle
Target: default
Workspace:
  User: [USERNAME]
  Path: /Workspace/Users/[USERNAME]/.bundle/test-bundle/default

Validation OK!

>>> [CLI] bundle plan
create apps.myapp
create pipelines.mypipeline

Plan: 2 to add, 0 to change, 0 to delete, 0 unchanged

>>> print_requests.py ^//import-file/
{
  "method": "POST",
  "path": "/api/2.0/workspace/mkdirs",
  "body": {
    "path": "/Workspace/Users/[USERNAME]/.bundle/test-bundle/default/files"
  }
}

>>> [CLI] bundle deploy
Uploading bundle files to /Workspace/Users/[USERNAME]/.bundle/test-bundle/default/files...
Deploying resources...
Updating deployment state...
Deployment complete!

>>> print_requests.py ^//import-file/
{
  "method": "POST",
  "path": "/api/2.0/workspace/delete",
  "body": {
    "path": "/Workspace/Users/[USERNAME]/.bundle/test-bundle/default/artifacts/.internal",
    "recursive": true
  }
}
{
  "method": "POST",
  "path": "/api/2.0/workspace/mkdirs",
  "body": {
    "path": "/Workspace/Users/[USERNAME]/.bundle/test-bundle/default/artifacts/.internal"
  }
}
{
  "method": "POST",
  "path": "/api/2.0/apps",
  "q": {
    "no_compute": "true"
  },
  "body": {
    "description": "best app",
    "name": "myapp"
  }
}
{
  "method": "POST",
  "path": "/api/2.0/pipelines",
  "body": {
    "channel": "CURRENT",
    "deployment": {
      "kind": "BUNDLE",
      "metadata_file_path": "/Workspace/Users/[USERNAME]/.bundle/test-bundle/default/state/metadata.json"
    },
    "edition": "ADVANCED",
    "name": "app url is myapp-123.cloud.databricksapps.com"
  }
}
{
  "method": "POST",
  "path": "/api/2.0/workspace/delete",
  "body": {
    "path": "/Workspace/Users/[USERNAME]/.bundle/test-bundle/default/state/deploy.lock"
  }
}

>>> [CLI] bundle destroy --auto-approve
The following resources will be deleted:
  delete app myapp
  delete pipeline mypipeline

This action will result in the deletion of the following Lakeflow Declarative Pipelines along with the
Streaming Tables (STs) and Materialized Views (MVs) managed by them:
  delete pipeline mypipeline

All files and directories at the following location will be deleted: /Workspace/Users/[USERNAME]/.bundle/test-bundle/default

Deleting files...
Destroy complete!

>>> print_requests.py --sort ^//import-file/
{
  "method": "DELETE",
  "path": "/api/2.0/apps/myapp"
}
{
  "method": "DELETE",
  "path": "/api/2.0/pipelines/[UUID]"
}
{
  "method": "POST",
  "path": "/api/2.0/workspace/delete",
  "body": {
    "path": "/Workspace/Users/[USERNAME]/.bundle/test-bundle/default",
    "recursive": true
  }
}
