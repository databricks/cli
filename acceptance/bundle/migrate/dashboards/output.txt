
>>> DATABRICKS_BUNDLE_ENGINE=terraform [CLI] bundle deploy
Uploading bundle files to /Workspace/Users/[USERNAME]/.bundle/test-bundle/default/files...
Deploying resources...
Updating deployment state...
Deployment complete!

>>> [CLI] bundle deployment migrate
Migrated 1 resources to direct engine state file: [TEST_TMP_DIR]/.databricks/bundle/default/resources.json
Validate the migration by running "bundle debug plan", there should be no actions planned.

The state file is not synchronized to the workspace yet. To do that and finalize the migration, run "bundle deploy".


>>> DATABRICKS_BUNDLE_ENGINE=terraform musterr [CLI] bundle plan
Error: Required engine "terraform" does not match present state files. Set required engine via "DATABRICKS_BUNDLE_ENGINE" env var.

Available state files:
- [TEST_TMP_DIR]/.databricks/bundle/default/resources.json: local direct state serial=2 lineage="[UUID]"


>>> DATABRICKS_BUNDLE_ENGINE=terraform musterr [CLI] bundle deploy
Error: Required engine "terraform" does not match present state files. Set required engine via "DATABRICKS_BUNDLE_ENGINE" env var.

Available state files:
- [TEST_TMP_DIR]/.databricks/bundle/default/resources.json: local direct state serial=2 lineage="[UUID]"


>>> DATABRICKS_BUNDLE_ENGINE=direct [CLI] bundle plan
recreate dashboards.dashboard1

Plan: 1 to add, 0 to change, 1 to delete, 0 unchanged
contains error: '1 unchanged' not found in the output.

>>> DATABRICKS_BUNDLE_ENGINE= [CLI] bundle plan
recreate dashboards.dashboard1

Plan: 1 to add, 0 to change, 1 to delete, 0 unchanged
contains error: '1 unchanged' not found in the output.

>>> DATABRICKS_BUNDLE_ENGINE= [CLI] bundle plan -o json

>>> print_requests.py --get //dashboards

>>> DATABRICKS_BUNDLE_ENGINE= [CLI] bundle deploy --auto-approve
Uploading bundle files to /Workspace/Users/[USERNAME]/.bundle/test-bundle/default/files...

This action will result in the deletion or recreation of the following dashboards.
This will result in changed IDs and permanent URLs of the dashboards that will be recreated:
  recreate resources.dashboards.dashboard1
Deploying resources...
Updating deployment state...
Deployment complete!

>>> print_requests.py --get //dashboards

=== Should show that it's already migrated
>>> musterr [CLI] bundle deployment migrate
Error: already using direct engine
Details: [TEST_TMP_DIR]/.databricks/bundle/default/resources.json: local direct state serial=2 lineage="[UUID]"

>>> DATABRICKS_BUNDLE_ENGINE= [CLI] bundle debug states
[TEST_TMP_DIR]/.databricks/bundle/default/resources.json: local direct state serial=2 lineage="[UUID]"

>>> DATABRICKS_BUNDLE_ENGINE= [CLI] bundle debug states --force-pull
resources.json: remote direct state serial=2 lineage="[UUID]"
[TEST_TMP_DIR]/.databricks/bundle/default/resources.json: local direct state serial=2 lineage="[UUID]"
