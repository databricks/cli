
>>> [CLI] bundle deploy
Uploading whl/source.whl...
Uploading bundle files to /Workspace/Users/[USERNAME]/.bundle/test-bundle/default/files...
Uploaded 8 files (ignored 3 directories and 4 files by .gitignore)
Deploying resources...
Deployment complete!

=== Expecting wheel to be uploaded
>>> jq .path
"/api/2.0/workspace-files/import-file/Workspace/Users/[USERNAME]/.bundle/test-bundle/default/files/whl/source.whl"
"/api/2.0/workspace-files/import-file/Workspace/foo/bar/artifacts/.internal/source.whl"

=== Expecting delete request to artifact_path/.internal folder
>>> jq -s .[] | select(.path=="/api/2.0/workspace/delete") | select(.body.path | test(".*/artifacts/.internal")) out.requests.txt
{
  "method": "POST",
  "path": "/api/2.0/workspace/delete",
  "body": {
    "path": "/Workspace/foo/bar/artifacts/.internal",
    "recursive": true
  }
}

=== Expecting mkdirs request to artifact_path/.internal folder
>>> jq -s .[] | select(.path=="/api/2.0/workspace/mkdirs") | select(.body.path | test(".*/artifacts/.internal")) out.requests.txt
{
  "method": "POST",
  "path": "/api/2.0/workspace/mkdirs",
  "body": {
    "path": "/Workspace/foo/bar/artifacts/.internal"
  }
}
