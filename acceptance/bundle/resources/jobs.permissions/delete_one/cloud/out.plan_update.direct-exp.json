{
  "plan": {
    "resources.jobs.job_with_permissions": {
      "action": "skip",
      "remote_state": {
        "created_time": [UNIX_TIME_MILLIS],
        "creator_user_name": "[USERNAME]",
        "job_id": [NUMID],
        "run_as_user_name": "[USERNAME]",
        "settings": {
          "deployment": {
            "kind": "BUNDLE",
            "metadata_file_path": "/Workspace/Users/[USERNAME]/.bundle/test-bundle-[UNIQUE_NAME]/default/state/metadata.json"
          },
          "edit_mode": "UI_LOCKED",
          "email_notifications": {},
          "format": "MULTI_TASK",
          "max_concurrent_runs": 1,
          "name": "job with permissions",
          "queue": {
            "enabled": true
          },
          "tasks": [
            {
              "email_notifications": {},
              "notebook_task": {
                "notebook_path": "/Workspace/Users/tester@databricks.com/notebook",
                "source": "WORKSPACE"
              },
              "run_if": "ALL_SUCCESS",
              "task_key": "main",
              "timeout_seconds": 0
            }
          ],
          "timeout_seconds": 0,
          "webhook_notifications": {}
        }
      },
      "changes": {
        "remote": {
          "email_notifications": {
            "action": "skip",
            "reason": "server_side_default"
          },
          "tasks[0].email_notifications": {
            "action": "skip",
            "reason": "server_side_default"
          },
          "tasks[0].run_if": {
            "action": "skip",
            "reason": "server_side_default"
          },
          "tasks[0].timeout_seconds": {
            "action": "skip",
            "reason": "server_side_default"
          },
          "timeout_seconds": {
            "action": "skip",
            "reason": "server_side_default"
          },
          "webhook_notifications": {
            "action": "skip",
            "reason": "server_side_default"
          }
        }
      }
    },
    "resources.jobs.job_with_permissions.permissions": {
      "depends_on": [
        {
          "node": "resources.jobs.job_with_permissions",
          "label": "${resources.jobs.job_with_permissions.id}"
        }
      ],
      "action": "update",
      "new_state": {
        "config": {
          "object_id": "/jobs/[NUMID]",
          "permissions": [
            {
              "group_name": "test-dabs-group-1",
              "permission_level": "CAN_MANAGE"
            },
            {
              "permission_level": "CAN_VIEW",
              "user_name": "test-dabs-2@databricks.com"
            },
            {
              "permission_level": "IS_OWNER",
              "service_principal_name": "[USERNAME]"
            }
          ]
        }
      },
      "remote_state": {
        "object_id": "/jobs/[NUMID]",
        "permissions": [
          {
            "permission_level": "CAN_MANAGE_RUN",
            "user_name": "test-dabs-1@databricks.com"
          },
          {
            "permission_level": "CAN_VIEW",
            "user_name": "test-dabs-2@databricks.com"
          },
          {
            "group_name": "test-dabs-group-1",
            "permission_level": "CAN_MANAGE"
          },
          {
            "permission_level": "IS_OWNER",
            "service_principal_name": "[USERNAME]"
          }
        ]
      },
      "changes": {
        "local": {
          "permissions": {
            "action": "update"
          }
        }
      }
    }
  }
}
