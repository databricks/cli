bundle:
  name: update-postgres-endpoint-$UNIQUE_NAME

sync:
  paths: []

resources:
  postgres_projects:
    my_project:
      project_id: test-pg-proj-$UNIQUE_NAME
      display_name: "Test Project for Endpoint Update"
      pg_version: 16
      history_retention_duration: 604800s
      default_endpoint_settings:
        autoscaling_limit_min_cu: 0.5
        autoscaling_limit_max_cu: 4
        suspend_timeout_duration: 300s

  postgres_branches:
    main:
      parent: ${resources.postgres_projects.my_project.id}
      branch_id: main
      no_expiry: true

  postgres_endpoints:
    my_endpoint:
      parent: ${resources.postgres_branches.main.id}
      endpoint_id: my-endpoint
      endpoint_type: ENDPOINT_TYPE_READ_WRITE
      autoscaling_limit_min_cu: 0.5
      autoscaling_limit_max_cu: 8
      suspend_timeout_duration: 300s
