bundle:
  name: test-pipeline-recreate-$UNIQUE_NAME

workspace:
  root_path: ~/.bundle/$UNIQUE_NAME

variables:
  # Note: In Terraform provider v1.98.0+, changing catalog no longer triggers recreation.
  # We use storage location instead (which is mutually exclusive with catalog).
  storage:
    description: Storage location for the Lakeflow Declarative Pipeline (mutually exclusive with catalog)
    default: ""
  catalog:
    description: The catalog the Lakeflow Declarative Pipeline should use (when not using storage)
    default: main

resources:
  pipelines:
    foo:
      name: test-pipeline-$UNIQUE_NAME
      libraries:
        - notebook:
            path: ./nb.sql
      development: true
      storage: ${var.storage}
      catalog: ${var.catalog}
      target: ${resources.schemas.bar.id}

  schemas:
    bar:
      name: test-schema-$UNIQUE_NAME
      catalog_name: ${var.catalog}
      comment: This schema was created from DABs

targets:
  development:
    default: true
