{
  "plan": {
    "resources.secret_scopes.my_scope": {
      "action": "skip",
      "remote_state": {
        "backend_type": "DATABRICKS",
        "name": "test-scope-permissions-[UNIQUE_NAME]"
      }
    },
    "resources.secret_scopes.my_scope.permissions": {
      "depends_on": [
        {
          "node": "resources.secret_scopes.my_scope",
          "label": "${resources.secret_scopes.my_scope.name}"
        }
      ],
      "action": "update_id",
      "new_state": {
        "value": {
          "scope_name": "",
          "acls": [
            {
              "permission": "MANAGE",
              "principal": "[USERNAME]"
            },
            {
              "permission": "WRITE",
              "principal": "deco-test-user@databricks.com"
            },
            {
              "permission": "MANAGE",
              "principal": "users"
            }
          ]
        },
        "vars": {
          "scope_name": "${resources.secret_scopes.my_scope.name}"
        }
      },
      "remote_state": {
        "scope_name": "test-scope-permissions-[UNIQUE_NAME]",
        "acls": [
          {
            "permission": "MANAGE",
            "principal": "[USERNAME]"
          },
          {
            "permission": "WRITE",
            "principal": "[TEST_SP_APPLICATION_ID]"
          },
          {
            "permission": "READ",
            "principal": "deco-test-user@databricks.com"
          },
          {
            "permission": "WRITE",
            "principal": "scopes-permissions-group-[UNIQUE_NAME]"
          }
        ]
      },
      "changes": {
        "local": {
          "acls": {
            "action": "update"
          },
          "scope_name": {
            "action": "update_id"
          }
        }
      }
    }
  }
}
