--- [TESTROOT]/bundle/templates/experimental-default-python-vnext/classic/../serverless/output/my_vnext_project/databricks.yml
+++ output/my_vnext_project/databricks.yml
@@ -34,4 +34,6 @@
       catalog: main
       schema: ${workspace.current_user.short_name}
+    presets:
+      artifacts_dynamic_version: true
   prod:
     mode: production
--- [TESTROOT]/bundle/templates/experimental-default-python-vnext/classic/../serverless/output/my_vnext_project/resources/sample_job.job.yml
+++ output/my_vnext_project/resources/sample_job.job.yml
@@ -26,5 +26,10 @@
           notebook_task:
             notebook_path: ../src/sample_notebook.ipynb
-          environment_key: default
+          job_cluster_key: job_cluster
+          libraries:
+            # By default we just include the .whl file generated for the my_vnext_project package.
+            # See https://docs.databricks.com/dev-tools/bundles/library-dependencies.html
+            # for more information on how to add other libraries.
+            - whl: ../dist/*.whl
         - task_key: python_wheel_task
           depends_on:
@@ -38,5 +43,10 @@
               - "--schema"
               - "${var.schema}"
-          environment_key: default
+          job_cluster_key: job_cluster
+          libraries:
+            # By default we just include the .whl file generated for the my_vnext_project package.
+            # See https://docs.databricks.com/dev-tools/bundles/library-dependencies.html
+            # for more information on how to add other libraries.
+            - whl: ../dist/*.whl
         - task_key: refresh_pipeline
           depends_on:
@@ -45,11 +55,11 @@
             pipeline_id: ${resources.pipelines.vnext_project_etl.id}

-      environments:
-        - environment_key: default
-          spec:
-            client: "2"
-            dependencies:
-              # By default we just include the .whl file generated for the my_vnext_project package.
-              # See https://docs.databricks.com/dev-tools/bundles/library-dependencies.html
-              # for more information on how to add other libraries.
-              - ../dist/*.whl
+      job_clusters:
+        - job_cluster_key: job_cluster
+          new_cluster:
+            spark_version: 16.4.x-scala2.12
+            node_type_id: [NODE_TYPE_ID]
+            data_security_mode: SINGLE_USER
+            autoscale:
+              min_workers: 1
+              max_workers: 4
--- [TESTROOT]/bundle/templates/experimental-default-python-vnext/classic/../serverless/output/my_vnext_project/resources/vnext_project_etl.pipeline.yml
+++ output/my_vnext_project/resources/vnext_project_etl.pipeline.yml
@@ -5,8 +5,7 @@
     vnext_project_etl:
       name: vnext_project_etl
-      ## Catalog is required for serverless compute
-      catalog: ${var.catalog}
+      ## Specify the 'catalog' field to configure this pipeline to make use of Unity Catalog:
+      # catalog: ${var.catalog}
       schema: ${var.schema}
-      serverless: true
       root_path: "."

