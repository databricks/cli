
=== Command should use default number of retries:
>>> musterr [CLI] psql my-database -- --dbname=db1 -p 3000
Instance: my-database
Connecting...
Simulating connection failure with exit code '2'
Connection failed with retryable error: connection failed (retryable): psql exited with code 2
Connection attempt 1/3 failed, retrying in 1s...
Retrying connection (attempt 2/3)...
Simulating connection failure with exit code '2'
Connection failed with retryable error: connection failed (retryable): psql exited with code 2
Connection attempt 2/3 failed, retrying in 2s...
Retrying connection (attempt 3/3)...
Simulating connection failure with exit code '2'
Connection failed with retryable error: connection failed (retryable): psql exited with code 2
Error: failed to connect after 3 attempts, last error: connection failed (retryable): psql exited with code 2

=== Command should use custom number of retries:
>>> musterr [CLI] psql my-database --max-retries 5 -- --dbname=db1 -p 3000
Instance: my-database
Connecting...
Simulating connection failure with exit code '2'
Connection failed with retryable error: connection failed (retryable): psql exited with code 2
Connection attempt 1/5 failed, retrying in 1s...
Retrying connection (attempt 2/5)...
Simulating connection failure with exit code '2'
Connection failed with retryable error: connection failed (retryable): psql exited with code 2
Connection attempt 2/5 failed, retrying in 2s...
Retrying connection (attempt 3/5)...
Simulating connection failure with exit code '2'
Connection failed with retryable error: connection failed (retryable): psql exited with code 2
Connection attempt 3/5 failed, retrying in 4s...
Retrying connection (attempt 4/5)...
Simulating connection failure with exit code '2'
Connection failed with retryable error: connection failed (retryable): psql exited with code 2
Connection attempt 4/5 failed, retrying in 8s...
Retrying connection (attempt 5/5)...
Simulating connection failure with exit code '2'
Connection failed with retryable error: connection failed (retryable): psql exited with code 2
Error: failed to connect after 5 attempts, last error: connection failed (retryable): psql exited with code 2

=== Command should not use retries:
>>> musterr [CLI] psql my-database --max-retries 0 -- --dbname=db1 -p 3000
Instance: my-database
Connecting...
Simulating connection failure with exit code '2'
