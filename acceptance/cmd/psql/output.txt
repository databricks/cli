
=== Test should use a fake psql command:
>>> psql --version
echo-arguments.sh was called with the following arguments: --version
PGSSLMODE=

=== Command should require instance name:
>>> musterr [CLI] psql
Error: please specify exactly one database instance name: databricks psql [DATABASE_INSTANCE_NAME]

Exit code (musterr): 1

=== Command should require instance name even if extra arguments are provided:
>>> musterr [CLI] psql -- --dbname=my-database
Error: please specify exactly one database instance name: databricks psql [DATABASE_INSTANCE_NAME]

Exit code (musterr): 1

=== Command should use default db name if it is not specified:
>>> [CLI] psql my-database
Connecting to Databricks Database Instance my-database ...
Database status:  RUNNING
Database postgres version:  14
Successfully fetched database credentials
Launching psql with connection to my-database.my-host.com...
Error running psql: looking up "psql" failed: exec: "psql": executable file not found in %PATH%
Error: looking up "psql" failed: exec: "psql": executable file not found in %PATH%
rm: cannot remove 'psql.bat': No such file or directory

Exit code: 1
